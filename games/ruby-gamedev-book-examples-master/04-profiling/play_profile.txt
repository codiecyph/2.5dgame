➜  code git:(master) ✗ ruby 03-prototype/main.rb
Thread ID: 70347814986860
Fiber ID: 70347814680040
Total: 16.373634
Sort by: self_time

 %self      total      self      wait     child     calls  name
 19.07      3.123     3.123     0.000     0.000  3331226   Gosu::Image#draw
  1.11      0.182     0.182     0.000     0.000      333   Gosu::Window#caption=
  0.37     15.843     0.061     0.000    15.782    33633  *Hash#each
  0.22      0.036     0.036     0.000     0.000        1   <Class::Gosu::Image>#load_tiles
  0.12      0.413     0.020     0.000     0.394     1087   Gosu::Window#show
  0.09      0.081     0.015     0.000     0.066      333   Tank#update
  0.08      0.052     0.013     0.000     0.039     1389   Bullet#update
  0.07      0.012     0.012     0.000     0.000      722   Gosu::Window#mouse_x
  0.07      0.379     0.011     0.000     0.368      333   PlayState#update
  0.06      0.027     0.010     0.000     0.017      333   Camera#update
  0.05      0.045     0.009     0.000     0.036     4901   Explosion#animation
  0.05      0.024     0.008     0.000     0.016     1015   Tank#speed
  0.05      0.061     0.008     0.000     0.053     1226   Explosion#draw
  0.05      0.015     0.008     0.000     0.007     1595   Bullet#trajectory_length
  0.05      0.009     0.008     0.000     0.001     1223   Explosion#frame_expired?
  0.05      0.078     0.008     0.000     0.070     1372   Bullet#draw
  0.04      0.007     0.007     0.000     0.000     5496   Gosu::Window#button_down?
  0.04      0.048     0.007     0.000     0.041     2449   Explosion#done?
  0.04      0.137     0.007     0.000     0.130      722   Array#map
  0.04      0.009     0.007     0.000     0.002     1348   Array#each
  0.04      0.009     0.006     0.000     0.003      333   Map#tile_at
  0.04      0.021     0.006     0.000     0.015     1409   Bullet#point_at_distance
  0.03     15.937     0.005     0.000    15.932      333   Gosu::Window#scale
  0.03      0.019     0.005     0.000     0.014     1348   Tank#moving?
  0.03      0.005     0.005     0.000     0.000        2   Gosu::Sample#initialize_
  0.03      0.014     0.005     0.000     0.009     1223   Explosion#update
  0.03     15.955     0.005     0.000    15.950      333   PlayState#draw
  0.03      0.014     0.005     0.000     0.009     1348   Tank#any_button_down?
  0.03      0.006     0.004     0.000     0.001     1595   <Module::Math>#sqrt
  0.03      0.011     0.004     0.000     0.006     1389   Bullet#exploaded?
  0.02      0.008     0.004     0.000     0.004     1226   Explosion#current_frame
  0.02      0.014     0.004     0.000     0.011     1389   Bullet#done?
  0.02      0.008     0.004     0.000     0.004      333   Camera#draw_crosshair
  0.02      0.004     0.004     0.000     0.000      297   Gosu::Song#play
  0.02      0.005     0.004     0.000     0.002      333   Tank#change_angle
  0.02      0.004     0.004     0.000     0.000     2429   Fixnum#-
  0.02      0.006     0.003     0.000     0.003      333   Tank#draw
  0.02      0.003     0.003     0.000     0.000     2708   <Module::Gosu>#milliseconds
  0.02     15.941     0.003     0.000    15.937      333   Gosu::Window#translate
  0.02      0.003     0.003     0.000     0.000     2632   Float#-
  0.02      0.003     0.003     0.000     0.000     1388   Gosu::Window#width
  0.02      0.004     0.003     0.000     0.001      389   Camera#target_delta_on_screen
  0.02      0.003     0.003     0.000     0.000      333   Gosu::Window#needs_cursor?
  0.02      0.017     0.003     0.000     0.014      333   Array#reject!
  0.02      0.003     0.002     0.000     0.000     1372   Bullet#arrived?
  0.01      0.002     0.002     0.000     0.000     1388   Gosu::Window#height
  0.01      0.002     0.002     0.000     0.000     1055   Symbol#to_proc
  0.01      0.002     0.002     0.000     0.000     1723   Float#*
  0.01      0.381     0.002     0.000     0.379      333   GameWindow#update
  0.01      0.002     0.002     0.000     0.000     1895   Float#+
  0.01      0.011     0.002     0.000     0.009      333   Map#can_move_to?
  0.01      0.002     0.002     0.000     0.000      999   Gosu::Image#draw_rot
  0.01      0.002     0.002     0.000     0.000      999   Fixnum#to_s
  0.01      0.002     0.002     0.000     0.000      333   <Module::Math>#atan2
  0.01      0.002     0.002     0.000     0.000      333   Tank#sound
  0.01      0.002     0.002     0.000     0.000      979   Float#<
  0.01     15.960     0.002     0.000    15.958      666  *Gosu::Window#protected_draw_2
  0.01      0.002     0.002     0.000     0.000     1389   Fixnum#*
  0.01      0.003     0.002     0.000     0.001      333   GameWindow#needs_redraw?
  0.01      0.002     0.002     0.000     0.000     1243   Fixnum#to_f
  0.01      0.002     0.002     0.000     0.000       40   Gosu::Sample#play
  0.01      0.001     0.001     0.000     0.000     1226   Gosu::Image#width
  0.01      0.001     0.001     0.000     0.000      722   Gosu::Window#mouse_y
  0.01     15.844     0.001     0.000    15.843      333   Map#draw
  0.01     15.956     0.001     0.000    15.955      333   GameWindow#draw
  0.01      0.003     0.001     0.000     0.002       56   Camera#mouse_coords
  0.01      0.001     0.001     0.000     0.000      666   Gosu::Window#draw_line
  0.01      0.001     0.001     0.000     0.000      747   Float#round
  0.01      0.001     0.001     0.000     0.000     1226   Gosu::Image#height
  0.01      0.001     0.001     0.000     0.000      699   Float#/
  0.01      0.001     0.001     0.000     0.000      635   Float#%
  0.01      0.001     0.001     0.000     0.000      336   Float#>
  0.01      0.001     0.001     0.000     0.000      333   GameState#needs_redraw?
  0.01      0.001     0.001     0.000     0.000      635   Float#floor
  0.01      0.001     0.001     0.000     0.000      333   Float#-@
  0.00      0.001     0.001     0.000     0.000      333   <Module::Gosu>#fps
  0.00      0.001     0.001     0.000     0.000      360   Fixnum#>
  0.00      0.001     0.001     0.000     0.000      146   Gosu::Window#draw_quad
  0.00      0.001     0.001     0.000     0.000      324   Fixnum#<
  0.00      0.006     0.000     0.000     0.006       44   PlayState#button_down
  0.00      0.005     0.000     0.000     0.004       56   Tank#shoot
  0.00      0.007     0.000     0.000     0.006       44   GameWindow#button_down
  0.00      0.000     0.000     0.000     0.000      146   Float#==
  0.00      0.004     0.000     0.000     0.003       20   Bullet#initialize
  0.00      0.000     0.000     0.000     0.000      146   Float#to_f
  0.00      0.008     0.000     0.000     0.008       42  *Class#new
  0.00      0.000     0.000     0.000     0.000       36   Gosu::Song#pause
  0.00      0.000     0.000     0.000     0.000       44   Gosu::Window#button_up
  0.00      0.000     0.000     0.000     0.000       20   Bullet#fire
  0.00      0.004     0.000     0.000     0.004       20   Explosion#initialize
  0.00      0.001     0.000     0.000     0.001       20   Bullet#sound
  0.00      0.004     0.000     0.000     0.004       20   Explosion#sound
  0.00      0.000     0.000     0.000     0.000       17   Fixnum#<=
  0.00      0.000     0.000     0.000     0.000       31   Integer#floor
  0.00      0.000     0.000     0.000     0.000       31   Integer#round
  0.00      0.000     0.000     0.000     0.000        1   PlayState#leave
  0.00      0.000     0.000     0.000     0.000        3   <Module::Game>#media_path
  0.00      0.005     0.000     0.000     0.005        2   Gosu::Sample#initialize
  0.00      0.000     0.000     0.000     0.000        6   <Class::File>#dirname
  0.00      0.000     0.000     0.000     0.000        3   <Class::File>#join
  0.00      0.000     0.000     0.000     0.000        2   Fixnum#+
  0.00      0.000     0.000     0.000     0.000        1   <Class::GameState>#switch
  0.00      0.000     0.000     0.000     0.000        1   <Class::MenuState>#instance
  0.00      0.000     0.000     0.000     0.000        2   Array#shift
  0.00      0.000     0.000     0.000     0.000        2   Array#first
  0.00      0.000     0.000     0.000     0.000        2   Kernel#is_a?
  0.00      0.000     0.000     0.000     0.000        1   String#to_str

* indicates recursively called methods
